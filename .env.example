# KonvertIt Environment Configuration
# Copy this file to .env and fill in your values

# ─── Application ──────────────────────────────────────────────
APP_NAME=KonvertIt
APP_ENV=development
APP_DEBUG=true
APP_HOST=0.0.0.0
APP_PORT=8000
SECRET_KEY=change-me-to-a-random-64-char-string
ENCRYPTION_KEY=change-me-generate-with-cryptography-fernet

# ─── Database ─────────────────────────────────────────────────
DATABASE_URL=postgresql+asyncpg://konvertit:konvertit_dev@localhost:5432/konvertit
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_RECYCLE=1800
DATABASE_POOL_PRE_PING=true
DATABASE_POOL_TIMEOUT=30

# ─── Redis ────────────────────────────────────────────────────
REDIS_URL=redis://localhost:6379/0

# ─── eBay API (Real credentials) ──────────────────────────────
EBAY_APP_ID=your-ebay-app-id
EBAY_DEV_ID=your-ebay-dev-id
EBAY_CERT_ID=your-ebay-cert-id
EBAY_REDIRECT_URI=your-ebay-redirect-uri
EBAY_SANDBOX=true

# ─── Proxy Configuration ─────────────────────────────────────
# ScraperAPI (recommended for MVP)
SCRAPER_API_KEY=your-scraperapi-key
# Or raw proxy list (comma-separated)
PROXY_LIST=
# Proxy provider: scraperapi | brightdata | smartproxy | raw
PROXY_PROVIDER=scraperapi

# ─── Scraping Configuration ──────────────────────────────────
SCRAPE_MIN_DELAY=2.0
SCRAPE_MAX_DELAY=4.0
SCRAPE_MAX_RETRIES=3
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_COOLDOWN_SECONDS=300

# ─── JWT Authentication ──────────────────────────────────────
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ─── Price Monitoring ────────────────────────────────────────
PRICE_MONITOR_INTERVAL_HOURS=6
PRICE_MONITOR_MAX_PRODUCTS=200

# ─── WebSocket ───────────────────────────────────────────────
WS_HEARTBEAT_INTERVAL=30
WS_MAX_CONNECTIONS_FREE=1
WS_MAX_CONNECTIONS_PRO=3
WS_MAX_CONNECTIONS_ENTERPRISE=10

# ─── Observability ───────────────────────────────────────────
# Sentry DSN — leave empty to disable Sentry (default for dev)
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1
LOG_LEVEL=INFO
# Log format: auto | console | json (auto = console in dev, json in prod)
LOG_FORMAT=auto

# ─── Performance ─────────────────────────────────────────────
# Slow query threshold in milliseconds
QUERY_SLOW_THRESHOLD_MS=200
# Redis cache default TTL in seconds
CACHE_TTL_DEFAULT=300
# GZip minimum response size in bytes
GZIP_MINIMUM_SIZE=500

# ─── CORS ────────────────────────────────────────────────────
# Comma-separated allowed origins for production (leave empty in dev)
# CORS_ALLOWED_ORIGINS=https://konvertit.com,https://app.konvertit.com

# ─── Playwright ───────────────────────────────────────────────
BROWSER_POOL_SIZE=3
HEADLESS=true

# ─── Production Deployment (Gunicorn) ────────────────────────
# Number of Gunicorn workers (default: auto based on CPU)
# WEB_CONCURRENCY=4
# Request timeout in seconds
# GUNICORN_TIMEOUT=120
# Restart workers after N requests (memory leak prevention)
# GUNICORN_MAX_REQUESTS=1000
